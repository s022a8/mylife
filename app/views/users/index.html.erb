<div class="index-page">
    <!-- 検索フォーム -->
    <div class="search-form">
        
            <div class="row">
                <div class="search-icon">
                    <%= image_tag 'icon_150050_256.png', size:'20x20' %>
                </div>

                <div class="col-md-8">
                    <!-- 検索フォーム（アカウント名） -->
                    <div id="names_search">
                        <%= form_tag(root_path, method: :get) do %>
                            <%= text_field_tag :search_names, '', placeholder:"アカウント名で検索", class:"search-form-field" %>
                            <%= submit_tag '検索', class:"search-btn" %>
                        <% end %>
                    </div>

                    <!-- 検索フォーム（タグ） -->
                    <div id="tags_search" class="display-none">
                        <%= form_tag(root_path, method: :get) do %>
                            <%= text_field_tag :search_tags, '', placeholder:"タグで検索", class:"search-form-field" %>
                            <%= submit_tag '検索', class:"search-btn" %>
                        <% end %>
                    </div>
                </div>

                <div class="col-md-4 search-radio-area">
                    <input type="radio" name="search" value="name" checked>アカウント名
                    <input type="radio" name="search" value="tag">タグ
                </div>
            </div>
        
    </div>

    <!-- 一覧 -->
    <div class="container">
        <% @users.each do |user| %>
            <div class="col-md-3" style="height:395px;">
                <div class="index-user">
                    <!-- turbolinks＝無効化 -->
                    <%= link_to user_histories_path(user), data: {"turbolinks": false} do %>
                        <p class="index-user-name"><%= user.name %></p>

                        <!-- 画像エリア -->
                        <div class="index-user-image-container">
                            <% if user.profile_image.attached? %>
                                <%= image_tag user.profile_image, size:'150x150', class:"index-user-image" %>
                            <% else %>
                                <%= image_tag 'blank-profile-picture-973460_640.png', size:'150x150', class:"index-user-image" %>
                            <% end %>
                        </div>
                    <% end %>

                    <!-- タグエリア -->
                    <% if user.part_list.present? %>
                        <div class="index-user-tags">
                            <% user.part_list.each do |tag| %>
                                <span class="index-user-tag"><%= tag %></span>
                            <% end %>
                        </div>
                    <% else %>
                        <div class="" 
                            style="width:223px; height:121px; background-color: rgba(138, 138, 138, 0.2);">
                        </div>
                    <% end %>
                </div>
            </div>
        <% end %>
    </div>

    <%= paginate @users %>
</div>

<!-- js -->
<script type="text/javascript">
    (function() {
        $(function() {
            $('input[name="search"]').change(function() {
                var checking = $(this).val();
                
                if (checking == 'name') {
                    $('#names_search').toggleClass('display-none');
                    $('#tags_search').toggleClass('display-none');
                } else if (checking == 'tag') {
                    $('#tags_search').toggleClass('display-none');
                    $('#names_search').toggleClass('display-none');
                } else {
                    return;
                }
            });
        });
    })();
</script>

